(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5767:function(e,a,l){Promise.resolve().then(l.bind(l,9419))},9419:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return P}});var t=l(3827),r=l(4090),s=l(2670);let n=[{title:"Dados Pessoais",fields:[{name:"nome",label:"Nome Completo",type:"text",required:!0},{name:"dataNascimento",label:"Data de Nascimento",type:"date",required:!0,mask:"99/99/9999"},{name:"estadoCivil",label:"Estado Civil",type:"select",required:!0,options:["Solteiro(a)","Casado(a)","Divorciado(a)","Vi\xfavo(a)","Uni\xe3o Est\xe1vel"]},{name:"nacionalidade",label:"Nacionalidade",type:"text",required:!0},{name:"naturalidade",label:"Naturalidade",type:"text",required:!1},{name:"cpf",label:"CPF",type:"text",required:!0,mask:"999.999.999-99"},{name:"rg",label:"RG",type:"text",required:!0},{name:"orgaoEmissor",label:"\xd3rg\xe3o Emissor",type:"text",required:!1},{name:"dataEmissao",label:"Data de Emiss\xe3o",type:"date",required:!1,mask:"99/99/9999"},{name:"nomeConjuge",label:"Nome do C\xf4njuge",type:"text",required:!0,showWhen:"conjugeFields"},{name:"cpfConjuge",label:"CPF do C\xf4njuge",type:"text",required:!0,mask:"999.999.999-99",showWhen:"conjugeFields"},{name:"dataNascimentoConjuge",label:"Data de Nascimento do C\xf4njuge",type:"date",required:!0,mask:"99/99/9999",showWhen:"conjugeFields"}]},{title:"Endere\xe7o e Contato",fields:[{name:"endereco",label:"Endere\xe7o",type:"text",required:!0},{name:"numero",label:"N\xfamero",type:"text",required:!0},{name:"complemento",label:"Complemento",type:"text",required:!1},{name:"bairro",label:"Bairro",type:"text",required:!1},{name:"cidade",label:"Cidade",type:"text",required:!1},{name:"estado",label:"Estado",type:"text",required:!1},{name:"cep",label:"CEP",type:"text",required:!1,mask:"99999-999"},{name:"telefone",label:"Telefone",type:"tel",required:!1,mask:"(99) 9999-9999"},{name:"celular",label:"Celular",type:"tel",required:!0,mask:"(99) 99999-9999"},{name:"email",label:"E-mail",type:"email",required:!0}]},{title:"Dados Profissionais",fields:[{name:"profissao",label:"Profiss\xe3o",type:"text",required:!0},{name:"empresa",label:"Empresa",type:"text",required:!0},{name:"cargo",label:"Cargo",type:"text",required:!1},{name:"rendaMensal",label:"Renda Mensal",type:"text",required:!0},{name:"tempoServico",label:"Tempo de Servi\xe7o",type:"text",required:!1}]},{title:"Dados do Financiamento",fields:[{name:"precoImovel",label:"Pre\xe7o do Im\xf3vel",type:"text",required:!0},{name:"valorFinanciamento",label:"Valor do Financiamento",type:"text",required:!0},{name:"prazoFinanciamento",label:"Prazo do Financiamento",type:"text",required:!0},{name:"incluirITBI",label:"Incluir ITBI",type:"select",required:!0,options:["Sim","N\xe3o"]},{name:"bancosPreferencia",label:"Bancos de Prefer\xeancia",type:"text",required:!1}]}];function o(e){let{currentStep:a,totalSteps:l}=e,r=a/(l-1)*100;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"w-full h-2 bg-white/20 rounded-full",children:(0,t.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(r,"%")}})}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-white/90 text-center",children:["Etapa ",a+1," de ",l]})]})}var i=l(6602),d=l.n(i),c=l(2956);let m=e=>{if(!e)return"CPF \xe9 obrigat\xf3rio";let a=e.replace(/[^\d]/g,"");return!!c.wn.isValid(a)||"CPF inv\xe1lido"},u=e=>e?e.replace(/[^\d]/g,"").length>=7||"RG inv\xe1lido":"RG \xe9 obrigat\xf3rio",p=e=>!e||e.replace(/[^\d]/g,"").length>=10||"Telefone inv\xe1lido",x=e=>e?11===e.replace(/[^\d]/g,"").length||"Celular inv\xe1lido":"Celular \xe9 obrigat\xf3rio",b=e=>e?!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"E-mail inv\xe1lido":"E-mail \xe9 obrigat\xf3rio",g=e=>{if(!e)return"Valor \xe9 obrigat\xf3rio";let a=e.replace(/[R$\s.]/g,"");return/^\d+(?:,\d{2})?$/.test(a)?Number(a.replace(",","."))>0||"O valor deve ser maior que zero":"Valor inv\xe1lido"},f=e=>{let a=e.replace(/\D/g,"");return a?(Number(a)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):""},v=(e,a)=>{if(a)return a;switch(e){case"cpf":case"cpfConjuge":return"999.999.999-99";case"rg":return"99.999.999-*";case"telefone":return"(99) 9999-9999";case"celular":return"(99) 99999-9999";case"cep":return"99999-999";case"dataNascimento":case"dataEmissao":case"dataNascimentoConjuge":return"99/99/9999";case"precoImovel":case"valorFinanciamento":case"rendaMensal":case"rendaMensalConjuge":return"currency";default:return""}},h=e=>["precoImovel","valorFinanciamento","rendaMensal","rendaMensalConjuge"].includes(e),y=(e,a)=>{let l={required:!!a&&"Este campo \xe9 obrigat\xf3rio"};switch(e){case"cpf":case"cpfConjuge":l.validate=m;break;case"rg":l.validate=u;break;case"telefone":l.validate=p;break;case"celular":l.validate=x;break;case"email":l.validate=b;break;case"precoImovel":case"valorFinanciamento":case"rendaMensal":case"rendaMensalConjuge":l.validate=g}return l},j=e=>"Casado(a)"===e||"Uni\xe3o Est\xe1vel"===e;function N(e){var a;let{name:l,label:r,type:n,required:o,mask:i,options:c,showWhen:m}=e,{register:u,formState:{errors:p},setValue:x,watch:b}=(0,s.Gc)(),g=null===(a=p[l])||void 0===a?void 0:a.message,N=v(l,i),C=y(l,o),w=b("estadoCivil");if("conjugeFields"===m&&!j(w))return null;let E="nomeConjuge"===l&&j(w),q=e=>{x(l,f(e.target.value),{shouldValidate:!0})};return(0,t.jsxs)(t.Fragment,{children:[E&&(0,t.jsxs)("div",{className:"mt-8 mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Dados do C\xf4njuge"}),(0,t.jsx)("div",{className:"h-px bg-gray-200 mt-2"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r,o&&(0,t.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(()=>{if("select"===n&&c)return(0,t.jsxs)("select",{...u(l,C),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),c.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]});if("checkbox"===n)return(0,t.jsx)("input",{type:"checkbox",...u(l,C),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"});let e="date"===n?"text":n;return h(l)?(0,t.jsx)("input",{type:"text",...u(l,C),onChange:q,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900",placeholder:r?"Digite ".concat(r.toLowerCase()):""}):N&&"currency"!==N?(0,t.jsx)(d(),{mask:N,...u(l,C),children:a=>(0,t.jsx)("input",{...a,type:e,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900",placeholder:r?"Digite ".concat(r.toLowerCase()):""})}):(0,t.jsx)("input",{type:e,...u(l,C),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900",placeholder:r?"Digite ".concat(r.toLowerCase()):""})})(),g&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-400",children:g})]})]})}function C(e){let{data:a,onEdit:l}=e;return(0,t.jsx)("div",{className:"space-y-6",children:n.map((e,r)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,t.jsx)("button",{onClick:()=>l(r),className:"text-sm text-primary hover:text-primary/80 underline",children:"Editar"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.fields.map(e=>{let l=a[e.name];return l||!1!==e.required?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 uppercase tracking-wider",children:e.label}),(0,t.jsx)("p",{className:"text-base font-medium text-gray-900 border-b border-gray-200 pb-1",children:l||"-"})]},e.name):null})})]},e.title))})}function w(){return(0,t.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-8 text-center",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Formul\xe1rio Enviado com Sucesso!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Em breve, nosso consultor entrar\xe1 em contato com voc\xea."}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Preencher Novo Formul\xe1rio"})]})})}var E=l(5986);let q=e=>{let a=[{title:"Dados Pessoais",fields:[{label:"Nome Completo",value:e.nome},{label:"Data de Nascimento",value:e.dataNascimento},{label:"Estado Civil",value:e.estadoCivil},{label:"Nacionalidade",value:e.nacionalidade},{label:"Naturalidade",value:e.naturalidade},{label:"CPF",value:e.cpf},{label:"RG",value:e.rg},{label:"\xd3rg\xe3o Emissor",value:e.orgaoEmissor},{label:"Data de Emiss\xe3o",value:e.dataEmissao}]}];if("Casado(a)"===e.estadoCivil||"Uni\xe3o Est\xe1vel"===e.estadoCivil){var l,t,r;a[0].fields.push({label:"Nome do C\xf4njuge",value:null!==(l=e.nomeConjuge)&&void 0!==l?l:""},{label:"CPF do C\xf4njuge",value:null!==(t=e.cpfConjuge)&&void 0!==t?t:""},{label:"Data de Nascimento do C\xf4njuge",value:null!==(r=e.dataNascimentoConjuge)&&void 0!==r?r:""})}a.push({title:"Endere\xe7o e Contato",fields:[{label:"Endere\xe7o",value:e.endereco},{label:"N\xfamero",value:e.numero},{label:"Complemento",value:e.complemento},{label:"Bairro",value:e.bairro},{label:"Cidade",value:e.cidade},{label:"Estado",value:e.estado},{label:"CEP",value:e.cep},{label:"Telefone",value:e.telefone},{label:"Celular",value:e.celular},{label:"E-mail",value:e.email}]},{title:"Dados Profissionais",fields:[{label:"Profiss\xe3o",value:e.profissao},{label:"Empresa",value:e.empresa},{label:"Cargo",value:e.cargo},{label:"Renda Mensal",value:e.rendaMensal},{label:"Tempo de Servi\xe7o",value:e.tempoServico}]},{title:"Dados do Financiamento",fields:[{label:"Pre\xe7o do Im\xf3vel",value:e.precoImovel},{label:"Valor do Financiamento",value:e.valorFinanciamento},{label:"Prazo do Financiamento",value:e.prazoFinanciamento},{label:"Incluir ITBI",value:e.incluirITBI?"Sim":"N\xe3o"},{label:"Bancos de Prefer\xeancia",value:e.bancosPreferencia}]});let s="FICHA DE CADASTRO - ASR ASSESSORIA\n\n";return a.forEach(e=>{s+="\n".concat(e.title,"\n")+("".padEnd(e.title.length,"=")+"\n\n"),e.fields.forEach(e=>{e.value&&(s+="".concat(e.label,": ").concat(e.value,"\n"))}),s+="\n"}),s},k={serviceId:"service_k13hl2o",templateId:"template_vubhbnl",publicKey:"zIubvbu-9AetnQGKc"};function F(){let[e,a]=(0,r.useState)(0),[l,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),b=(0,s.cI)(),{handleSubmit:g,reset:f}=b;(0,r.useEffect)(()=>{E.ZP.init({publicKey:k.publicKey})},[]);let v=()=>{l?i(!1):a(e=>e-1)},h=async()=>{try{u(!0),x(null);let e=b.getValues(),a=q(e);console.log("Enviando email com os seguintes dados:",{serviceId:k.serviceId,templateId:k.templateId,hasPublicKey:!!k.publicKey,templateParams:{to_name:"ASR Assessoria",from_name:e.nome,message:a}}),await E.ZP.send(k.serviceId,k.templateId,{to_name:"ASR Assessoria",from_name:e.nome,message:a}),c(!0)}catch(a){console.error("Erro detalhado ao enviar email:",a);let e="Ocorreu um erro ao enviar o formul\xe1rio. ";a instanceof Error?e+=a.message:"string"==typeof a&&(e+=a),x(e)}finally{u(!1)}};return d?(0,t.jsx)(w,{}):(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(o,{currentStep:l?n.length:e,totalSteps:n.length+1})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-8",children:[l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Revis\xe3o dos Dados"}),(0,t.jsx)(C,{data:b.getValues(),onEdit:e=>{a(e),i(!1)}})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:n[e].title})}),(0,t.jsx)(s.RV,{...b,children:(0,t.jsxs)("form",{onSubmit:g(l=>{e===n.length-1?i(!0):a(e=>e+1)}),children:[(0,t.jsx)("div",{className:"space-y-4",children:n[e].fields.map(e=>(0,t.jsx)(N,{...e},e.name))}),(0,t.jsxs)("div",{className:"mt-8 flex justify-between",children:[e>0&&(0,t.jsx)("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Voltar"}),(0,t.jsx)("button",{type:"submit",className:"ml-auto px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:e===n.length-1?"Revisar":"Pr\xf3ximo"})]})]})})]}),l&&(0,t.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,t.jsx)("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Voltar"}),(0,t.jsx)("button",{onClick:h,disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Enviando...":"Enviar"})]}),p&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-red-50 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:p})})]})]})}function P(){return(0,t.jsx)("main",{className:"min-h-screen bg-primary",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Ficha de Cadastro"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-white",children:"Preencha todos os campos obrigat\xf3rios marcados com *"})]}),(0,t.jsx)(F,{})]})})})}}},function(e){e.O(0,[730,971,69,744],function(){return e(e.s=5767)}),_N_E=e.O()}]);